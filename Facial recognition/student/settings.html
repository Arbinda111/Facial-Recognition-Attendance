<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student â€¢ Settings</title>

  <!-- Base + student skin (you chose Option B) -->
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="student.css">
</head>
<body class="student-portal">
  <div class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar">
      <h2>STUDENT PORTAL</h2>
      <nav>
        <a href="student_dashboard.html">Dashboard</a>
        <a href="my_attendance.html">My Attendance</a>
        <a href="student_timetable.html">Timetable</a>
        <a href="settings.html" class="active">Settings</a>
        <a href="../login.html">Logout</a>
      </nav>
      <div class="logos">
        <img src="../images/cihe_logo.png" alt="CIHE Logo">
        <img src="../images/fullattend_logo.png" alt="FullAttend Logo">
      </div>
    </aside>

    <!-- Main -->
    <main class="dashboard-content">
      <h1>Settings</h1>
      <p class="muted">Update your profile, password, and preferences.</p>

      <!-- Profile -->
      <section class="form-card" style="margin-top:14px;">
        <h2 style="margin:0 0 10px;">Profile</h2>
        <form class="settings-form" id="profileForm" action="#">
          <div style="display:flex; gap:18px; align-items:center; margin-bottom:12px;">
            <div id="avatar" style="width:84px;height:84px;border-radius:50%;background:#cbd5ff;display:flex;align-items:center;justify-content:center;font-weight:800;color:#111;background-size:cover;background-position:center;">JD</div>
            <div>
              <label for="avatarInput" style="font-weight:600;">Profile Photo</label>
              <input id="avatarInput" type="file" accept="image/*">
            </div>
          </div>

          <label for="name">Full Name</label>
          <input id="name" type="text" placeholder="Jane Doe" required>

          <label for="email">Email</label>
          <input id="email" type="email" placeholder="jane.doe@student.cihe.edu.au" required>

          <label for="phone">Phone</label>
          <input id="phone" type="tel" placeholder="+61 4xx xxx xxx">

          <button type="submit">Save Profile</button>
        </form>
      </section>

      <!-- Security -->
      <section class="form-card" style="margin-top:18px;">
        <h2 style="margin:0 0 10px;">Account Security</h2>
        <form class="settings-form" id="pwdForm" action="#">
          <label for="cur">Current Password</label>
          <input id="cur" type="password" placeholder="Current password" required>

          <label for="new">New Password</label>
          <input id="new" type="password" placeholder="New password" required>

          <label for="conf">Confirm New Password</label>
          <input id="conf" type="password" placeholder="Confirm new password" required>

          <button type="submit">Update Password</button>
        </form>
      </section>

      <!-- Preferences -->
      <section class="form-card" style="margin-top:18px;">
        <h2 style="margin:0 0 10px;">Preferences</h2>
        <form class="settings-form" id="prefForm" action="#">
          <label>
            <input type="checkbox" checked>
            Email me weekly attendance summary
          </label>

          <label>
            <input type="checkbox">
            Show desktop notifications
          </label>

          <label for="theme">Theme</label>
          <select id="theme" class="class-selector" style="width:max-content;">
            <option value="light" selected>Light</option>
            <option value="dark">Dark</option>
            <option value="system">System</option>
          </select>

          <button type="submit">Save Preferences</button>
        </form>
      </section>

      <!-- Student ID (read-only card preview) -->
      <section class="form-card" style="margin-top:18px;">
        <h2 style="margin:0 0 10px;">Student Identification</h2>
        <div style="display:flex;gap:16px;align-items:center;flex-wrap:wrap;">
          <div style="border:1px solid var(--border); border-radius:12px; padding:12px 16px; min-width:260px;">
            <div style="font-weight:800;">Jane Doe</div>
            <div class="muted" style="margin:2px 0 6px;">ID: CIHE240369</div>
            <div class="muted">Course: BIT</div>
          </div>
          <a class="btn" href="#" onclick="window.print();return false;">Download / Print ID</a>
        </div>
      </section>
    </main>
  </div>

  <!-- tiny JS: avatar initials/preview + simple password check -->
  <script>
    const avatarBox = document.getElementById('avatar');
    const fileIn    = document.getElementById('avatarInput');
    const nameIn    = document.getElementById('name');

    function setInitials(){
      const n = (nameIn.value||'').trim().split(/\s+/);
      const init = (n[0]?.[0]||'') + (n[1]?.[0]||'');
      if (!fileIn.files.length){
        avatarBox.style.backgroundImage = '';
        avatarBox.textContent = (init || 'ST').toUpperCase();
      }
    }
    nameIn.addEventListener('input', setInitials);

    fileIn.addEventListener('change', e=>{
      const f = e.target.files[0]; if(!f) return;
      const rd = new FileReader();
      rd.onload = ev => { avatarBox.textContent=''; avatarBox.style.backgroundImage = `url('${ev.target.result}')`; };
      rd.readAsDataURL(f);
    });

    document.getElementById('pwdForm').addEventListener('submit', e=>{
      const n = document.getElementById('new').value;
      const c = document.getElementById('conf').value;
      if(n !== c){ e.preventDefault(); alert('New passwords do not match.'); }
    });

    // optional: theme demo (no persistence)
    document.getElementById('theme').addEventListener('change', e=>{
      document.documentElement.dataset.theme = e.target.value; // hook for future theming
      alert('Theme preference saved (demo).');
    });

    // init initials on load
    setInitials();
  </script>
</body>
</html>
