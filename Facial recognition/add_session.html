<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Add Session</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar">
      <h2>FULL ATTEND</h2>
      <nav>
        <a href="admin_dashboard.html">Dashboard</a>
        <a href="class_management.html">Class Management</a>
        <a href="student_directory.html">Student Directory</a>
        <a href="project_reports.html">Reports</a>
        <a href="timetable.html" class="active">Time Table</a>
        <a href="settings.html">Settings</a>
        <a href="login.html">Logout</a>
      </nav>
      <div class="logos">
        <img src="images/cihe_logo.png" alt="CIHE Logo"/>
        <img src="images/fullattend_logo.png" alt="FullAttend Logo"/>
      </div>
    </aside>

    <!-- Main -->
    <main class="dashboard-content">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;">
        <div>
          <h1>Add Session</h1>
          <p class="muted">Create a new timetable session for a class.</p>
        </div>
        <div class="toolbar">
          <a class="btn" href="timetable.html">Back to Timetable</a>
        </div>
      </div>

      <!-- Form card -->
      <section class="form-card" style="margin-top:16px;">
        <form id="sessionForm" action="#" method="post">
          <div class="form-grid">
            <div>
              <label for="classSel">Class</label>
              <select id="classSel" name="classSel" class="class-selector" required>
                <option value="" disabled selected>Select class</option>
                <option>Class 101 (Project-1)</option>
                <option>Class 102 (Mobile Application)</option>
                <option>Class 103 (Business Ethic)</option>
                <option>Class 104 (Algorithms & DS)</option>
              </select>
            </div>

            <div>
              <label for="title">Session Title</label>
              <input id="title" name="title" type="text" placeholder="e.g., Sprint Review / Lab" required>
            </div>

            <div>
              <label for="date">Date</label>
              <input id="date" name="date" type="date" required>
            </div>

            <div>
              <label for="start">Start Time</label>
              <input id="start" name="start" type="time" value="09:00" required>
            </div>

            <div>
              <label for="end">End Time</label>
              <input id="end" name="end" type="time" value="10:00" required>
            </div>

            <div>
              <label for="room">Room / Location</label>
              <input id="room" name="room" type="text" placeholder="Room A1 / Lab L1">
            </div>

            <div>
              <label for="instructor">Instructor</label>
              <input id="instructor" name="instructor" type="text" placeholder="Dr. Jane Doe">
            </div>

            <div>
              <label for="stype">Session Type</label>
              <select id="stype" name="stype" class="class-selector">
                <option>Lecture</option>
                <option>Lab</option>
                <option>Tutorial</option>
                <option>Exam</option>
                <option>Other</option>
              </select>
            </div>
          </div>

          <!-- Recurrence -->
          <div class="recurrence">
            <label class="switch">
              <input id="repeatWeekly" type="checkbox">
              <span>Repeat weekly</span>
            </label>

            <div id="repeatBlock" class="repeat-block" hidden>
              <div class="form-grid">
                <div>
                  <label>Repeat Until</label>
                  <input id="repeatUntil" type="date">
                </div>
                <div>
                  <label>Weeks to Create</label>
                  <input id="repeatCount" type="number" min="1" max="16" value="8">
                </div>
              </div>

              <div class="weekday-pills" aria-label="Days of week">
                <label><input type="checkbox" value="Mon" checked><span>Mon</span></label>
                <label><input type="checkbox" value="Tue"><span>Tue</span></label>
                <label><input type="checkbox" value="Wed"><span>Wed</span></label>
                <label><input type="checkbox" value="Thu"><span>Thu</span></label>
                <label><input type="checkbox" value="Fri"><span>Fri</span></label>
              </div>
              <small class="muted">Pick the days this session repeats on.</small>
            </div>
          </div>

          <!-- Notes -->
          <div style="margin-top:16px;">
            <label for="notes">Notes (optional)</label>
            <textarea id="notes" name="notes" rows="4" placeholder="Add any details students should knowâ€¦"></textarea>
          </div>

          <!-- Actions -->
          <div class="form-actions">
            <a class="btn" href="timetable.html" style="background:#e5e7eb; color:#111;">Cancel</a>
            <button class="btn" type="submit">Save Session</button>
          </div>
        </form>
      </section>
    </main>
  </div>

  <!-- Tiny JS: toggle recurrence block + simple time validation -->
  <script>
    const repeat = document.getElementById('repeatWeekly');
    const repeatBlock = document.getElementById('repeatBlock');
    const date = document.getElementById('date');
    const start = document.getElementById('start');
    const end = document.getElementById('end');
    const form = document.getElementById('sessionForm');

    // Default date = today
    if (!date.value){
      const today = new Date();
      const iso = today.toISOString().slice(0,10);
      date.value = iso;
    }

    repeat.addEventListener('change', () => {
      repeatBlock.hidden = !repeat.checked;
    });

    form.addEventListener('submit', (e) => {
      // basic validation: end after start
      if (start.value && end.value && end.value <= start.value) {
        e.preventDefault();
        alert('End time must be after start time.');
      }
    });
  </script>
</body>
</html>
