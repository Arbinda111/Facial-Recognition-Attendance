<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Add Student</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar">
      <h2>FULL ATTEND</h2>
      <nav>
        <a href="admin_dashboard.html">Dashboard</a>
        <a href="class_management.html">Class Management</a>
        <a href="student_directory.html" class="active">Student Directory</a>
        <a href="project_reports.html">Reports</a>
        <a href="timetable.html">Time Table</a>
        <a href="settings.html">Settings</a>
        <a href="login.php">Logout</a>
      </nav>
      <div class="logos">
        <img src="images/cihe_logo.png" alt="CIHE Logo"/>
        <img src="images/fullattend_logo.png" alt="FullAttend Logo"/>
      </div>
    </aside>

    <!-- Main -->
    <main class="dashboard-content">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;">
        <div>
          <h1>Add Student</h1>
          <p class="muted">Create a new student profile and assign to a class.</p>
        </div>
        <div class="toolbar">
          <a class="btn" href="student_directory.html">Back to Directory</a>
        </div>
      </div>

      <!-- Form card -->
      <section class="form-card" style="margin-top:16px;">
        <form id="studentForm" action="#" method="post" enctype="multipart/form-data">
          <!-- Basic info -->
          <div class="form-grid">
            <div>
              <label for="firstName">First Name</label>
              <input id="firstName" name="firstName" type="text" placeholder="Jane" required>
            </div>
            <div>
              <label for="lastName">Last Name</label>
              <input id="lastName" name="lastName" type="text" placeholder="Doe" required>
            </div>
            <div>
              <label for="studentId">Student ID</label>
              <input id="studentId" name="studentId" type="text" placeholder="CIHE24xxx" required>
            </div>
            <div>
              <label for="email">Email</label>
              <input id="email" name="email" type="email" placeholder="jane.doe@student.cihe.edu.au" required>
            </div>
            <div>
              <label for="phone">Phone (optional)</label>
              <input id="phone" name="phone" type="tel" placeholder="+61 4xx xxx xxx">
            </div>
            <div>
              <label for="classSel">Class</label>
              <select id="classSel" name="classSel" class="class-selector" required>
                <option value="" disabled selected>Select class</option>
                <option>Class 101 (Project-1)</option>
                <option>Class 102 (Mobile Application)</option>
                <option>Class 103 (Business Ethic)</option>
                <option>Class 104 (Algorithms & DS)</option>
              </select>
            </div>
            <div>
              <label for="yearSel">Year</label>
              <select id="yearSel" name="yearSel" class="class-selector">
                <option>2025</option><option>2026</option>
              </select>
            </div>
            <div>
              <label for="statusSel">Status</label>
              <select id="statusSel" name="statusSel" class="class-selector">
                <option>Active</option><option>Inactive</option>
              </select>
            </div>
            <div>
              <label for="attendance">Overall Attendance (%)</label>
              <input id="attendance" name="attendance" type="number" min="0" max="100" step="1" placeholder="e.g., 92">
            </div>
          </div>

          <!-- Avatar upload -->
          <div class="upload-wrap">
            <div class="avatar-preview" id="avatarPreview">AL</div>
            <div class="upload-area" id="dropArea">
              <p class="muted" style="margin:0 0 6px;">Profile Photo (PNG/JPG)</p>
              <input id="avatarFile" name="avatarFile" type="file" accept="image/*">
              <small class="muted">Drag & drop or click to upload. Max 3MB.</small>
            </div>
          </div>

          <!-- Actions -->
          <div class="form-actions">
            <a class="btn" href="student_directory.html" style="background:#e5e7eb; color:#111;">Cancel</a>
            <button class="btn" type="submit">Save Student</button>
          </div>
        </form>
      </section>
    </main>
  </div>

  <!-- Tiny JS: avatar preview + drag/drop -->
  <script>
    const fileInput = document.getElementById('avatarFile');
    const dropArea  = document.getElementById('dropArea');
    const preview   = document.getElementById('avatarPreview');
    const first     = document.getElementById('firstName');
    const last      = document.getElementById('lastName');

    function updateInitials(){
      const f = (first.value||'').trim()[0]||'';
      const l = (last.value||'').trim()[0]||'';
      if(!fileInput.files.length){
        preview.style.backgroundImage = '';
        preview.textContent = (f+l || 'AL').toUpperCase();
      }
    }
    first.addEventListener('input', updateInitials);
    last.addEventListener('input', updateInitials);

    function showPreview(file){
      if(!file) return;
      const reader = new FileReader();
      reader.onload = e => {
        preview.textContent = '';
        preview.style.backgroundImage = `url('${e.target.result}')`;
      };
      reader.readAsDataURL(file);
    }
    fileInput.addEventListener('change', e => showPreview(e.target.files[0]));

    ;['dragenter','dragover'].forEach(evt =>
      dropArea.addEventListener(evt, e => { e.preventDefault(); dropArea.classList.add('drag'); })
    );
    ;['dragleave','drop'].forEach(evt =>
      dropArea.addEventListener(evt, e => { e.preventDefault(); dropArea.classList.remove('drag'); })
    );
    dropArea.addEventListener('drop', e => {
      const file = e.dataTransfer.files[0];
      if(file){ fileInput.files = e.dataTransfer.files; showPreview(file); }
    });
  </script>
</body>
</html>
